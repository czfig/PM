(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-436b23c6"],{2909:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("6b75");function a(t){if(Array.isArray(t))return Object(r["a"])(t)}n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("a630");function o(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var i=n("06c5");n("d9e2");function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t){return a(t)||o(t)||Object(i["a"])(t)||c()}},5530:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));n("b64b"),n("a4d3"),n("4de4"),n("d3b7"),n("e439"),n("159b"),n("dbb4");function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}},"83cd":function(t,e,n){"use strict";n.d(e,"d",(function(){return a})),n.d(e,"a",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"b",(function(){return c}));var r=n("9dc1");function a(t){return Object(r["a"])({url:"/ToolReturn/normalReturn",method:"post",data:t})}function o(t){return Object(r["a"])({url:"/ToolReturn/checkRecords",method:"post",data:t})}function i(t){return Object(r["a"])({url:"/ToolReturn/lostRecords",method:"post",data:t})}function c(t){return Object(r["a"])({url:"/ToolReturn/getUnReturnApproveNum",method:"post",data:t})}},"99af":function(t,e,n){"use strict";var r=n("23e7"),a=n("da84"),o=n("d039"),i=n("e8b5"),c=n("861d"),s=n("7b0b"),d=n("07fa"),f=n("8418"),l=n("65f0"),u=n("1dde"),b=n("b622"),h=n("2d00"),m=b("isConcatSpreadable"),p=9007199254740991,v="Maximum allowed index exceeded",g=a.TypeError,w=h>=51||!o((function(){var t=[];return t[m]=!1,t.concat()[0]!==t})),O=u("concat"),y=function(t){if(!c(t))return!1;var e=t[m];return void 0!==e?!!e:i(t)},D=!w||!O;r({target:"Array",proto:!0,forced:D},{concat:function(t){var e,n,r,a,o,i=s(this),c=l(i,0),u=0;for(e=-1,r=arguments.length;e<r;e++)if(o=-1===e?i:arguments[e],y(o)){if(a=d(o),u+a>p)throw g(v);for(n=0;n<a;n++,u++)n in o&&f(c,u,o[n])}else{if(u>=p)throw g(v);f(c,u++,o)}return c.length=u,c}})},a5f3:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"returnContain"},[t._m(0),n("div",{staticClass:"tools-contain"},[n("div",{staticClass:"tools-left"},[n("label",[t._v("已借用工器具列表")]),n("DataTable",{ref:"lefttable",attrs:{url:"/ToolReturn/getNoReturn",param:{userid:t.user.id},opgroup:!0,expand:!0,filter:!1,stripe:!0,height:"calc(100vh - 320px)",fields:[{id:"name",name:"工器具名称",show:!0},{id:"model",name:"规格型号",show:!0}],expandList:[{id:"code",name:"工器具编号",show:!0}]},on:{initDataTable:t.handleLeft}})],1),n("div",{staticClass:"tools-right"},[n("label",[t._v("已扫描工器具列表")]),n("DataTable",{ref:"righttable",attrs:{opgroup:!0,expand:!0,filter:!1,stripe:!0,height:"calc(100vh - 320px)",fields:[{id:"name",name:"工器具名称",show:!0,width:"120"},{id:"model",name:"规格型号",show:!0,width:"200"},{id:"number",name:"已扫描数量",show:!0,width:"120"}],expandList:[{id:"code",name:"工器具编号",show:!0}]}})],1)]),n("el-button",{attrs:{type:"primary"},on:{click:t.showDiff}},[t._v("确认归还(测试)")]),n("DialogTable",{ref:"diffTableDialog",attrs:{stripe:"",title:"您还有下列工器具为归还",filter:"",custombtn:"",diafootbtn:[{name:"知道了",type:"success",action:t.handleSubmit}],fields:[{id:"name",name:"工器具名称",show:!0,width:200},{id:"model",name:"型号",show:!0},{id:"diffnum",name:"待补数量",show:!0}]}})],1)},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"returnContain-info"},[n("br"),n("div",{staticStyle:{"margin-top":"10px"}},[n("span",[t._v("正常作业--正常退库")])]),n("br")])}],o=n("5530"),i=n("2909"),c=(n("e9c4"),n("a434"),n("d3b7"),n("b0c0"),n("159b"),n("99af"),n("d81d"),n("83cd")),s={data:function(){return{user:this.$storage.getUserInfo(),testData:[],leftData:[],diffData:[]}},methods:{handleLeft:function(t){for(var e=t.data,n=t.success,r=[],a=function(t){var n=e.list[t],a=!1;r.some((function(t,e){if(t.name==n.name&&t.model==n.model)return a=e,!0})),!1===a?r.push({name:n.name,model:n.model,list:[{code:n.code,tool_id:n.tool_id,record_id:n.record_id}]}):r[a].list.push({code:n.code,tool_id:n.tool_id,record_id:n.record_id})},o=0;o<e.list.length;o++)a(o);this.leftData=r,this.testData=JSON.parse(JSON.stringify(r)),this.testData[0].list.splice(1,2),this.$refs["righttable"].initList(this.testData),n(r)},handleSubmit:function(){var t=this,e=[];this.testData.forEach((function(t){e=[].concat(Object(i["a"])(t.list.map((function(t){return t.record_id}))),Object(i["a"])(e))})),Object(c["d"])(e).then((function(e){t.$message.success(e.msg),t.$refs["diffTableDialog"].close(),t.$refs["lefttable"].initList()}))},showDiff:function(){var t=this;this.leftData.forEach((function(e){t.testData.forEach((function(n){var r=e.list.length-n.list.length;e.name==n.name&&r&&(t.diffData.push({name:e.name,model:e.model,diffnum:r}),e.sel=!0)})),e.sel||t.diffData.push(Object(o["a"])(Object(o["a"])({},e),{},{diffnum:e.list.length}))})),this.$refs["diffTableDialog"].show(this.diffData)}}},d=s,f=n("2877"),l=Object(f["a"])(d,r,a,!1,null,null,null);e["default"]=l.exports},dbb4:function(t,e,n){var r=n("23e7"),a=n("83ab"),o=n("56ef"),i=n("fc6a"),c=n("06cf"),s=n("8418");r({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(t){var e,n,r=i(t),a=c.f,d=o(r),f={},l=0;while(d.length>l)n=a(r,e=d[l++]),void 0!==n&&s(f,e,n);return f}})},e439:function(t,e,n){var r=n("23e7"),a=n("d039"),o=n("fc6a"),i=n("06cf").f,c=n("83ab"),s=a((function(){i(1)})),d=!c||s;r({target:"Object",stat:!0,forced:d,sham:!c},{getOwnPropertyDescriptor:function(t,e){return i(o(t),e)}})}}]);