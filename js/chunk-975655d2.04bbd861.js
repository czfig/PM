(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-975655d2"],{"1cce":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("span",{staticStyle:{"font-size":"1.5rem","font-weight":"bold"}},[e._v(e._s(e.user.city))]),e._v("仓库列表 "),r("div",{staticClass:"contain"},[r("DataTable",{ref:"storage-table",attrs:{url:"/storage/getStorageAndGroupList",param:{city:e.user.city},"top-opera":"",filter:!1,stripe:"",index:"",height:"calc(100vh - 200px)","table-operations-width":230,fields:[{id:"name",name:"仓库名称",show:!0},{id:"group_name",name:"班组名称",show:!0},{id:"leader_name",name:"班组长",show:!0},{id:"manager_name",name:"库管员",show:!0}],"table-operations":[{name:"添加仓库",type:"success",action:function(){e.$refs["storage-info"].show({})}},{name:"创建用户",type:"success",action:function(){e.$refs["user-form"].show({})}}],operations:[{name:"查看班组信息",type:"success",action:e.handleGroupInfo,show:!0},{name:"删除仓库",type:"danger",action:e.handleDeleteStorage,show:!0}]},on:{initDataTable:e.handleData}})],1),r("DialogTable",{ref:"group-info",attrs:{title:"班组成员信息及管理",height:400,stripe:"",index:"",fields:[{id:"name",name:"成员名称",show:!0},{id:"username",name:"账号",show:!0},{id:"role_name",name:"角色",show:!0},{id:"state",name:"状态",show:!0,filter:function(e){return e?"正常":"停用"}}]},on:{submit:e.submitUserInfo,initDataTable:e.handleGroupInfoTable}}),r("DialogForm",{ref:"user-form",attrs:{title:"用户信息",fields:[{id:"username",lable:"账号",required:!0,action:e.searchUserInAdd},{id:"name",lable:"用户名",required:!0},{id:"sign",lable:"角色",required:!0,type:"select",options:[{name:"库管员",value:"Warehousekeeper"},{name:"班长",value:"Foreman"}]},{id:"tel_num",lable:"电话号码",required:!0}]},on:{submit:e.submitUserInfo}}),r("DialogForm",{ref:"storage-info",attrs:{title:"添加仓库信息",fields:[{id:"storage_name",lable:"仓库名称",limit:{min:2,max:20},required:!0},{id:"group_name",lable:"班组名称",limit:{min:2,max:20},required:!0},{id:"leader_num",lable:"班组长用户名",limit:{min:2,max:20},required:!0,search:"el-icon-search",placeholder:"可输入用户账号，输入完后会自动查找，不存在则需要添加",action:e.searchUser},{id:"leader_name",lable:"班组长姓名",limit:{min:2,max:20},required:!0}]},on:{submit:e.addStorage}})],1)},a=[],o=r("5530"),i=(r("b0c0"),r("aecd")),s=r("c24f"),c={data:function(){return{user:this.$storage.getUserInfo()}},created:function(){},methods:{handleGroupInfoTable:function(e){e.success(obj)},searchUserInAdd:function(e){this.searchUser(e,0)},searchUser:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Object(i["e"])({username:e}).then((function(e){-1===e.code?r&&(t.$message({type:"info",message:"用户不存在，请创建用户后再添加仓库",duration:5e3}),t.$refs["storage-info"].form.data.leader_num=""):r?(t.$refs["storage-info"].form.data.leader_id=e.data.id,t.$refs["storage-info"].form.data.leader_name=e.data.name):(t.$message({type:"info",message:"用户已存在,请重新输入",duration:3e3}),t.$refs["user-form"].form.data={})}))},submitUserInfo:function(e){var t=this;e.city=this.user.city,Object(s["a"])(e).then((function(e){t.$message.success("添加成功")}))},handleGroupInfo:function(e){var t=this;Object(i["c"])({group_id:e.group_id}).then((function(e){t.$refs["group-info"].show(e.data.list)}))},addStorage:function(e){var t=this;e.city=this.user.city,Object(i["a"])(e).then((function(e){t.$refs["storage-table"].initList(),t.$message.success("添加成功")}))},handleData:function(e){for(var t=e.data,r=e.success,n=0;n<t.list.length;n++)t.list[n]=Object(o["a"])(Object(o["a"])({},t.list[n]),t.list[n].groupList[0]);r(t.list)},handleGroupListData:function(e){e.success(this.groupList)},handleDeleteStorage:function(e){var t=this;this.$confirm("确认删除仓库吗？").then((function(){Object(i["b"])({storage_id:e.storage_id}).then((function(){t.$refs["storage-table"].initList(),t.$message.success("删除成功")}))}))}}},u=c,d=(r("fca2"),r("2877")),f=Object(d["a"])(u,n,a,!1,null,"e2c5db0c",null);t["default"]=f.exports},5530:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));r("b64b"),r("a4d3"),r("4de4"),r("d3b7"),r("e439"),r("159b"),r("dbb4");function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},aecd:function(e,t,r){"use strict";r.d(t,"e",(function(){return a})),r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return s})),r.d(t,"d",(function(){return c}));var n=r("9dc1");function a(e){return Object(n["a"])({url:"/storage/getUserByUsername",method:"post",data:e})}function o(e){return Object(n["a"])({url:"/storage/addStorage",method:"post",data:e})}function i(e){return Object(n["a"])({url:"/storage/deleteStorage",method:"post",data:e})}function s(e){return Object(n["a"])({url:"/storage/getGroupMember",method:"post",data:e})}function c(e){return Object(n["a"])({url:"/storage/getStorageInfo",method:"post",data:e})}},c24f:function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"d",(function(){return o})),r.d(t,"a",(function(){return i})),r.d(t,"c",(function(){return s})),r.d(t,"e",(function(){return c}));var n=r("9dc1");function a(e){return Object(n["a"])({url:"/userManage/getAllCity",method:"post",data:e})}function o(e){return Object(n["a"])({url:"/userManage/updateUser",method:"post",data:e})}function i(e){return Object(n["a"])({url:"/userManage/addUser",method:"post",data:e})}function s(e){return Object(n["a"])({url:"/role/getAllRole",method:"post",data:e})}function c(e){return Object(n["a"])({url:"/role/updateRole",method:"post",data:e})}},dbb4:function(e,t,r){var n=r("23e7"),a=r("83ab"),o=r("56ef"),i=r("fc6a"),s=r("06cf"),c=r("8418");n({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(e){var t,r,n=i(e),a=s.f,u=o(n),d={},f=0;while(u.length>f)r=a(n,t=u[f++]),void 0!==r&&c(d,t,r);return d}})},e439:function(e,t,r){var n=r("23e7"),a=r("d039"),o=r("fc6a"),i=r("06cf").f,s=r("83ab"),c=a((function(){i(1)})),u=!s||c;n({target:"Object",stat:!0,forced:u,sham:!s},{getOwnPropertyDescriptor:function(e,t){return i(o(e),t)}})},f379:function(e,t,r){},fca2:function(e,t,r){"use strict";r("f379")}}]);